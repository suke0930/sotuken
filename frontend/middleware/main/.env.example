# ===================================
# Frontend Middleware Configuration
# ===================================
# このファイルを .env にコピーして使用してください
# 本番環境では環境変数で上書きすることを推奨します

# ===================================
# Server Configuration
# ===================================
# フロントエンドミドルウェアのポート
PORT=12800

# 実行環境 (development | production | test)
NODE_ENV=development

# ===================================
# SSL/TLS Configuration
# ===================================
# SSL/TLS を有効化 (true | false)
SSL_ENABLED=true

# SSL証明書のCommon Name (本番環境ではドメイン名を指定)
SSL_COMMON_NAME=localhost

# SSL証明書の組織名
SSL_ORGANIZATION=MCserverManager

# 証明書の有効期間（日数）
CERT_VALIDITY_DAYS=365

# 証明書更新の閾値（有効期限の何日前に更新するか）
CERT_RENEWAL_THRESHOLD_DAYS=10

# ===================================
# Session Configuration
# ===================================
# セッションシークレット（本番環境では必ず変更してください）
# 未設定の場合は自動生成されますが、サーバー再起動時に全セッションが無効化されます
# 生成方法: openssl rand -base64 64
# SESSION_SECRET=your-secret-here

# セッション名
SESSION_NAME=frontdriver-session

# セッションの有効期限（ミリ秒）
SESSION_MAX_AGE=86400000

# ===================================
# Backend API Configuration
# ===================================
# バックエンドAsset ServerのURL
# Docker環境: http://asset-server:3000
# スタンドアロン環境（開発用）: http://localhost:3000
# Nginx経由（推奨）: http://localhost:8080
BACKEND_API_URL=http://localhost:8080

# バックエンドAPIのタイムアウト（ミリ秒）
BACKEND_API_TIMEOUT=300000

# ===================================
# FRP Configuration
# ===================================
# NOTE: フロントエンドは接続情報のみを保持します
# バックエンドの管理設定（ポート、ダッシュボード等）はバックエンド側で管理されます
# フロントエンド（middleware）とバックエンド（Docker）は多対1の関係です

# FRPバイナリのダウンロードベースURL
# バックエンドのAsset Server経由でFRPクライアントバイナリを取得
# Nginx経由を推奨: http://localhost:8080/api/assets/frp
FRP_BINARY_BASE_URL=http://localhost:8080/api/assets/frp

# FRP認証サーバーのURL
# バックエンドのFRP認証システムに接続
# Nginx経由を推奨: http://localhost:8080
FRP_AUTH_SERVER_URL=http://localhost:8080

# FRPサーバーのアドレス（クライアントとして接続する先）
# バックエンドで実行されているFRPサーバーのアドレス
# ローカル開発: 127.0.0.1
# リモート環境: バックエンドサーバーのIP/ドメイン
FRP_SERVER_ADDR=127.0.0.1

# FRPサーバーのポート（クライアントとして接続する先）
# バックエンドで実行されているFRPサーバーのポート
# 既定値: 7000（バックエンドのdocker-compose.yml参照）
FRP_SERVER_PORT=7000

# FRPクライアントのデータディレクトリ（このフロントエンド環境のローカルストレージ）
# 相対パスまたは絶対パスで指定
FRP_DATA_DIR=./userdata/frp

# FRPクライアントバイナリのバージョン
FRPC_VERSION=1.0.0

# クライアント側のセッション管理設定
# 揮発性セッション（サーバー再起動時にセッションをクリア）
# 開発環境: true, 本番環境: false を推奨
FRP_VOLATILE_SESSIONS=true

# クライアント側のJWT更新設定
# JWT更新間隔（時間）
FRP_JWT_REFRESH_INTERVAL_HOURS=6

# JWT更新マージン（分）
FRP_JWT_REFRESH_MARGIN_MINUTES=5

# 認証ポーリング間隔（ミリ秒）
FRP_AUTH_POLL_INTERVAL_MS=1000

# クライアント側のログ設定
# ログの最大行数
FRP_LOG_MAX_LINES=400

# ログの最大バイト数
FRP_LOG_MAX_BYTES=5242880

# ログローテーション制限
FRP_LOG_ROTATE_LIMIT=5

# ===================================
# JDK Manager Configuration
# ===================================
# JDKインストールディレクトリ
JDK_DATA_DIR=./userdata/jdk

# ===================================
# Minecraft Server Manager Configuration
# ===================================
# Minecraftサーバーデータディレクトリ
MC_DATA_DIR=./userdata/minecraftServ

# サーバー停止タイムアウト（ミリ秒）
MC_SERVER_STOP_TIMEOUT=30000

# ===================================
# Download Configuration
# ===================================
# ダウンロード一時ディレクトリ
DOWNLOAD_TEMP_PATH=./temp/download

# ===================================
# Path Configuration
# ===================================
# ユーザーデータベースディレクトリ
USERDATA_DIR=./userdata

# 開発用シークレットディレクトリ
DEV_SECRET_DIR=./devsecret

# ===================================
# Logging Configuration
# ===================================
# ログレベル (trace | debug | info | warn | error | fatal)
LOG_LEVEL=info

# ファイルログを有効化 (true | false)
LOG_FILE_ENABLED=false

# ログファイルのパス
LOG_FILE_PATH=./logs/app.log

# ===================================
# Docker Environment Integration
# ===================================
# フロントエンドミドルウェアとバックエンドの関係: 多対1
# - 複数のフロントエンドミドルウェアが1つのバックエンドに接続可能
# - フロントエンドは接続情報のみを保持（バックエンドの管理設定は不要）
# - バックエンドの管理設定（ダッシュボード、内部ポート等）はbackend/Docker/.envで管理
#
# 接続経路（推奨）:
# フロントエンドミドルウェア → Nginx(8080) → バックエンドサービス
#
# Nginx経由の接続先:
# - Asset Server: http://localhost:8080/api/
# - FRP Auth API: http://localhost:8080/api/auth/
# - FRP Binary Download: http://localhost:8080/api/assets/frp
#
# バックエンド側の構成（参考情報）:
# - nginx: 8080:80 (外部公開ポート)
# - asset-server: 3000 (内部)
# - frp-authjs: 3002:3000 (開発用ポート公開)
# - frp-server: 7000:7000 (FRPクライアント接続ポート)
#
# 注意: フロントエンドは7000番（FRP_SERVER_PORT）にFRPクライアントとして接続します

# ===================================
# Advanced Configuration (Optional)
# ===================================
# これらの設定は通常変更不要です

# FRPバイナリダウンロードURL（プラットフォーム別）
# 環境変数で個別に指定することも可能
# FRPC_DOWNLOAD_URL_LINUX_X64=
# FRPC_DOWNLOAD_URL_LINUX_ARM64=
# FRPC_DOWNLOAD_URL_DARWIN_X64=
# FRPC_DOWNLOAD_URL_DARWIN_ARM64=
# FRPC_DOWNLOAD_URL_WINDOWS_X64=
# FRPC_DOWNLOAD_URL_WINDOWS_ARM64=
