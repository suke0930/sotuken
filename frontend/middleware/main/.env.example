# ===================================
# Frontend Middleware Configuration
# ===================================
# このファイルを .env にコピーして使用してください
# 本番環境では環境変数で上書きすることを推奨します

# ===================================
# Server Configuration
# ===================================
# フロントエンドミドルウェアのポート
PORT=12800

# 実行環境 (development | production | test)
NODE_ENV=development

# ===================================
# SSL/TLS Configuration
# ===================================
# SSL/TLS を有効化 (true | false)
SSL_ENABLED=true

# SSL証明書のCommon Name (本番環境ではドメイン名を指定)
SSL_COMMON_NAME=localhost

# SSL証明書の組織名
SSL_ORGANIZATION=MCserverManager

# 証明書の有効期間（日数）
CERT_VALIDITY_DAYS=365

# 証明書更新の閾値（有効期限の何日前に更新するか）
CERT_RENEWAL_THRESHOLD_DAYS=10

# ===================================
# Session Configuration
# ===================================
# セッションシークレット（本番環境では必ず変更してください）
# 未設定の場合は自動生成されますが、サーバー再起動時に全セッションが無効化されます
# 生成方法: openssl rand -base64 64
# SESSION_SECRET=your-secret-here

# セッション名
SESSION_NAME=frontdriver-session

# セッションの有効期限（ミリ秒）
SESSION_MAX_AGE=86400000

# ===================================
# Backend API Configuration
# ===================================
# バックエンドAsset ServerのURL
# Docker環境: http://asset-server:3000
# スタンドアロン環境（開発用）: http://localhost:3000
# Nginx経由（推奨）: http://localhost:8080
BACKEND_API_URL=http://localhost:8080

# バックエンドAPIのタイムアウト（ミリ秒）
BACKEND_API_TIMEOUT=300000

# ===================================
# FRP Configuration
# ===================================
# FRPバイナリのダウンロードベースURL
# Nginx経由を推奨: http://localhost:8080/api/assets/frp
FRP_BINARY_BASE_URL=http://localhost:8080/api/assets/frp

# FRP認証サーバーのURL
# Nginx経由を推奨: http://localhost:8080
FRP_AUTH_SERVER_URL=http://localhost:8080

# FRPサーバーのアドレス
# Docker環境: frp-server (docker-composeのサービス名)
# スタンドアロン環境: 127.0.0.1
FRP_SERVER_ADDR=127.0.0.1

# FRPサーバーのポート
# docker-compose.yml参照: ${FRP_BIND_PORT:-7000}
FRP_SERVER_PORT=7000

# FRPダッシュボードのポート
# docker-compose.yml参照: ${FRP_DASHBOARD_PORT:-7500}
FRP_DASHBOARD_PORT=7500

# FRPデータディレクトリ
# 相対パスまたは絶対パスで指定
FRP_DATA_DIR=./userdata/frp

# FRPバイナリのバージョン
FRPC_VERSION=1.0.0

# 揮発性セッション（サーバー再起動時にセッションをクリア）
# 開発環境: true, 本番環境: false を推奨
FRP_VOLATILE_SESSIONS=true

# JWT更新間隔（時間）
FRP_JWT_REFRESH_INTERVAL_HOURS=6

# JWT更新マージン（分）
FRP_JWT_REFRESH_MARGIN_MINUTES=5

# 認証ポーリング間隔（ミリ秒）
FRP_AUTH_POLL_INTERVAL_MS=1000

# ===================================
# FRP Log Configuration
# ===================================
# ログの最大行数
FRP_LOG_MAX_LINES=400

# ログの最大バイト数
FRP_LOG_MAX_BYTES=5242880

# ログローテーション制限
FRP_LOG_ROTATE_LIMIT=5

# ===================================
# JDK Manager Configuration
# ===================================
# JDKインストールディレクトリ
JDK_DATA_DIR=./userdata/jdk

# ===================================
# Minecraft Server Manager Configuration
# ===================================
# Minecraftサーバーデータディレクトリ
MC_DATA_DIR=./userdata/minecraftServ

# サーバー停止タイムアウト（ミリ秒）
MC_SERVER_STOP_TIMEOUT=30000

# ===================================
# Download Configuration
# ===================================
# ダウンロード一時ディレクトリ
DOWNLOAD_TEMP_PATH=./temp/download

# ===================================
# Path Configuration
# ===================================
# ユーザーデータベースディレクトリ
USERDATA_DIR=./userdata

# 開発用シークレットディレクトリ
DEV_SECRET_DIR=./devsecret

# ===================================
# Logging Configuration
# ===================================
# ログレベル (trace | debug | info | warn | error | fatal)
LOG_LEVEL=info

# ファイルログを有効化 (true | false)
LOG_FILE_ENABLED=false

# ログファイルのパス
LOG_FILE_PATH=./logs/app.log

# ===================================
# Docker Environment Integration
# ===================================
# 以下の設定はDocker環境でbackend/Docker/.envと連携して使用されます
# フロントエンドミドルウェアは主にNginx経由でバックエンドに接続します
#
# Nginx設定参照:
# - Asset Server: http://asset-server:3000 → http://localhost:8080/api/
# - FRP Auth.js: http://frp-authjs:3000 → http://localhost:8080/api/auth/
# - FRP Authz: http://frp-authz:3001 (内部通信のみ)
# - FRP Server: frp-server:7000, :7500
#
# docker-compose-dev.yml参照:
# - nginx: 8080:80
# - asset-server: 3000
# - frp-authjs: 3002:3000
# - frp-server: 7000:7000, 7500:7500

# ===================================
# Advanced Configuration (Optional)
# ===================================
# これらの設定は通常変更不要です

# FRPバイナリダウンロードURL（プラットフォーム別）
# 環境変数で個別に指定することも可能
# FRPC_DOWNLOAD_URL_LINUX_X64=
# FRPC_DOWNLOAD_URL_LINUX_ARM64=
# FRPC_DOWNLOAD_URL_DARWIN_X64=
# FRPC_DOWNLOAD_URL_DARWIN_ARM64=
# FRPC_DOWNLOAD_URL_WINDOWS_X64=
# FRPC_DOWNLOAD_URL_WINDOWS_ARM64=
